struct MathUtils {
    $() {
    }
}

impl MathUtils {
    fn add(int a, int b) -> int {
        return a + b;
    }
    
    fn multiply(int a, int b) -> int {
        return a * b;
    }
    
    fn power(int base, int exp) -> int {
        if exp == 0 {
            return 1;
        }
        return base * power(base, exp - 1);
    }
}

struct ComplexStruct {
    Point center;
    Calculator calc;
    
    $(Point p, Calculator c) {
        center = p;
        calc = c;
    }
}

main {
    let MathUtils math = $MathUtils();
    
    let int deep_result = math.add(
        math.multiply(
            math.add(10, 5),
            math.add(20, 4)
        ),
        math.power(2, 3)
    );
    
    let int[][][] cube = new int[3][4][5];
    let int single_value = math.multiply(2, 3);
    
    let ComplexStruct cs = $ComplexStruct(
        $Point(
            math.add(1, 2),
            math.add(5, 3)
        ),
        $Calculator(
            math.multiply(10, 5)
        )
    );
    
    let bool complex_condition = (
        (x + y * z / w - v) >= (a * b - c) and
        (math.add(1, 2) > 0 or math.multiply(2, 3) < 10) and
        !variable_check
    ) or (
        getc == 65 and 
        other_condition != false
    );
    
    if complex_condition {
        while x < math.add(10, 5) {
            for (let int i = 0; i < math.multiply(3, 2); i = math.add(i, 1)) {
                if i == math.add(2, 1) {
                    loop {
                        let int value = math.multiply(
                            math.add(i, 1),
                            math.power(2, 2)
                        );
                        if value > math.multiply(10, 2) {
                            return math.add(value, 1);
                        }
                    }
                }
            }
            x = math.add(x, 1);
        }
    }
    
    let Point& p_ref = &cs.center;
    let int nested_access = p_ref->x;
    
    let Calculator* calc_ptr = &cs.calc;
    let int ptr_result = calc_ptr->add(math.multiply(5, 2));
    
    **&calc_ptr = $Calculator(100);
}