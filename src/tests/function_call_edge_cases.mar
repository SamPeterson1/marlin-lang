struct Calculator {
    int value;
    
    $() {
        value = 0;
    }
    
    $(int initial) {
        value = initial;
    }
}

impl Calculator {
    fn add(int x) -> int {
        value = value + x;
        return value;
    }
    
    fn multiply(int x) -> int {
        value = value * x;
        return value;
    }
    
    fn get_value() -> int {
        return value;
    }
}

impl int {
    fn square() -> int {
        return *this * *this;
    }
    
    fn add_ten() -> int {
        return *this + 10;
    }
}

main {
    let Calculator calc = $Calculator();
    let int result1 = calc.add(5);
    let int result2 = calc.multiply(3);
    
    let Calculator calc2 = $Calculator(100);
    let int chain_result = calc2.add(10).multiply(2);
    
    let int x = 5;
    let int squared = x.square();
    let int with_ten = x.add_ten();
    
    let Calculator& calc_ref = &calc;
    let int ref_result = calc_ref->add(1);
    
    let Point p = $Point(3, 4);
    let int x_coord = p.x;
    let Point& p_ref = &p;
    let int y_coord = p_ref->y;
    
    let Calculator new_calc = new $Calculator(50);
    
    let int complex_call = calc.add(x.square()).multiply(2);
}